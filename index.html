<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booker - Boutique en Ligne</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B00',
            secondary: '#1A1A2E',
            accent: '#00D9A5',
          }
        }
      }
    }
  </script>
  <style>
    [x-cloak] { display: none !important; }
    .gradient-bg {
      background: linear-gradient(135deg, #1A1A2E 0%, #16213E 100%);
    }
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen" x-data="shop()">

  <!-- Header -->
  <header class="gradient-bg sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
          </div>
          <h1 class="text-2xl font-bold text-white">Booker</h1>
        </div>

        <div class="flex items-center space-x-4">
          <button @click="cartOpen = true" class="relative p-2 text-white hover:text-primary transition">
            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            <span x-show="cart.length > 0"
                  x-text="cart.length"
                  class="absolute -top-1 -right-1 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">
            </span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="gradient-bg py-12">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">
        Bienvenue sur <span class="text-primary">Booker</span>
      </h2>
      <p class="text-gray-300 text-lg mb-6">D√©couvrez nos produits aux meilleurs prix</p>
      <div class="flex justify-center gap-2 flex-wrap">
        <span class="px-4 py-2 bg-white/10 rounded-full text-white text-sm">üì± √âlectronique</span>
        <span class="px-4 py-2 bg-white/10 rounded-full text-white text-sm">üéí Accessoires</span>
        <span class="px-4 py-2 bg-white/10 rounded-full text-white text-sm">üè† Maison</span>
        <span class="px-4 py-2 bg-white/10 rounded-full text-white text-sm">‚öΩ Sport</span>
      </div>
    </div>
  </section>

  <!-- Products Grid -->
  <main class="container mx-auto px-4 py-8">
    <!-- Filters -->
    <div class="flex flex-wrap gap-4 mb-8 justify-center">
      <button @click="selectedCategory = 'all'"
              :class="selectedCategory === 'all' ? 'bg-primary text-white' : 'bg-white text-gray-700 hover:bg-gray-100'"
              class="px-6 py-2 rounded-full font-medium transition shadow">
        Tous
      </button>
      <template x-for="cat in categories" :key="cat">
        <button @click="selectedCategory = cat"
                :class="selectedCategory === cat ? 'bg-primary text-white' : 'bg-white text-gray-700 hover:bg-gray-100'"
                class="px-6 py-2 rounded-full font-medium transition shadow"
                x-text="cat">
        </button>
      </template>
    </div>

    <!-- Loading State -->
    <div x-show="loading" class="text-center py-12">
      <div class="animate-spin w-12 h-12 border-4 border-primary border-t-transparent rounded-full mx-auto"></div>
      <p class="text-gray-500 mt-4">Chargement des produits...</p>
    </div>

    <!-- Products -->
    <div x-show="!loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <template x-for="product in filteredProducts" :key="product.id">
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover transition duration-300">
          <div class="relative">
            <img :src="product.image" :alt="product.name" class="w-full h-48 object-cover">
            <span class="absolute top-3 right-3 bg-primary text-white px-3 py-1 rounded-full text-sm font-bold"
                  x-text="product.price + ' FCFA'">
            </span>
          </div>
          <div class="p-4">
            <span class="text-xs text-primary font-semibold uppercase tracking-wide" x-text="product.category"></span>
            <h3 class="font-bold text-lg text-gray-800 mt-1" x-text="product.name"></h3>
            <p class="text-gray-500 text-sm mt-1 line-clamp-2" x-text="product.description"></p>
            <button @click="addToCart(product)"
                    class="w-full mt-4 bg-secondary text-white py-3 rounded-xl font-medium hover:bg-primary transition flex items-center justify-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
              Ajouter
            </button>
          </div>
        </div>
      </template>
    </div>

    <!-- Empty State -->
    <div x-show="!loading && filteredProducts.length === 0" class="text-center py-12">
      <svg class="w-24 h-24 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
      </svg>
      <p class="text-gray-500 mt-4">Aucun produit trouv√©</p>
    </div>
  </main>

  <!-- Cart Sidebar -->
  <div x-show="cartOpen" x-cloak class="fixed inset-0 z-50">
    <div @click="cartOpen = false" x-show="cartOpen" x-transition.opacity class="absolute inset-0 bg-black/50"></div>
    <div x-show="cartOpen"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="translate-x-full"
         x-transition:enter-end="translate-x-0"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="translate-x-0"
         x-transition:leave-end="translate-x-full"
         class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl">

      <div class="flex flex-col h-full">
        <div class="gradient-bg p-4 flex items-center justify-between">
          <h2 class="text-xl font-bold text-white">Panier</h2>
          <button @click="cartOpen = false" class="text-white hover:text-primary transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-y-auto p-4">
          <div x-show="cart.length === 0" class="text-center py-12">
            <svg class="w-20 h-20 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            <p class="text-gray-500 mt-4">Votre panier est vide</p>
            <button @click="cartOpen = false" class="mt-4 text-primary font-medium">Continuer vos achats</button>
          </div>

          <template x-for="(item, index) in cart" :key="item.id + '-' + index">
            <div class="flex gap-4 p-4 bg-gray-50 rounded-xl mb-3">
              <img :src="item.image" :alt="item.name" class="w-20 h-20 object-cover rounded-lg">
              <div class="flex-1">
                <h4 class="font-semibold text-gray-800" x-text="item.name"></h4>
                <p class="text-primary font-bold" x-text="item.price + ' FCFA'"></p>
                <div class="flex items-center gap-2 mt-2">
                  <button @click="decreaseQty(item)" class="w-8 h-8 bg-white rounded-lg flex items-center justify-center hover:bg-gray-200 transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                    </svg>
                  </button>
                  <span class="w-8 text-center font-medium" x-text="item.quantity"></span>
                  <button @click="increaseQty(item)" class="w-8 h-8 bg-white rounded-lg flex items-center justify-center hover:bg-gray-200 transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <button @click="removeFromCart(item)" class="text-red-500 hover:text-red-700 self-start">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </template>
        </div>

        <div x-show="cart.length > 0" class="border-t p-4 space-y-4">
          <div class="flex justify-between text-lg font-bold">
            <span>Total</span>
            <span class="text-primary" x-text="cartTotal() + ' FCFA'"></span>
          </div>
          <button @click="checkoutOpen = true; cartOpen = false"
                  class="w-full bg-primary text-white py-4 rounded-xl font-bold hover:bg-orange-600 transition">
            Passer la commande
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div x-show="checkoutOpen" x-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div @click="checkoutOpen = false" x-show="checkoutOpen" x-transition.opacity class="absolute inset-0 bg-black/50"></div>
    <div x-show="checkoutOpen"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100 scale-100"
         x-transition:leave-end="opacity-0 scale-95"
         class="relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto">

      <div class="gradient-bg p-6 rounded-t-2xl">
        <h2 class="text-2xl font-bold text-white">Paiement</h2>
        <p class="text-gray-300 mt-1">Finalisez votre commande</p>
      </div>

      <div class="p-6 space-y-4">
        <!-- Order Summary -->
        <div class="bg-gray-50 rounded-xl p-4">
          <h3 class="font-semibold text-gray-800 mb-3">R√©sum√© de la commande</h3>
          <div class="space-y-2 text-sm">
            <template x-for="item in cart" :key="item.id">
              <div class="flex justify-between">
                <span class="text-gray-600">
                  <span x-text="item.quantity"></span> x <span x-text="item.name"></span>
                </span>
                <span class="font-medium" x-text="(item.price * item.quantity) + ' FCFA'"></span>
              </div>
            </template>
          </div>
          <div class="border-t mt-3 pt-3 flex justify-between font-bold text-lg">
            <span>Total √† payer</span>
            <span class="text-primary" x-text="cartTotal() + ' FCFA'"></span>
          </div>
        </div>

        <!-- Customer Info Form -->
        <form @submit.prevent="processPayment" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Nom complet</label>
            <input type="text" x-model="customer.name" required
                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"
                   placeholder="Jean Dupont">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Num√©ro de t√©l√©phone</label>
            <input type="tel" x-model="customer.phone" required
                   pattern="242[0-9]{9}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition"
                   placeholder="242061234567">
            <p class="text-xs text-gray-500 mt-1">Format: 242XXXXXXXXX (9 chiffres apr√®s 242)</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Op√©rateur Mobile</label>
            <div class="grid grid-cols-2 gap-3">
              <label class="relative cursor-pointer">
                <input type="radio" name="provider" value="MTN" x-model="customer.provider" required class="peer sr-only">
                <div class="border-2 border-gray-200 rounded-xl p-4 text-center peer-checked:border-yellow-400 peer-checked:bg-yellow-50 transition">
                  <div class="w-12 h-12 bg-yellow-400 rounded-full mx-auto mb-2 flex items-center justify-center">
                    <span class="text-white font-bold text-sm">MTN</span>
                  </div>
                  <span class="text-sm font-medium">MTN Mobile Money</span>
                </div>
              </label>
              <label class="relative cursor-pointer">
                <input type="radio" name="provider" value="AIRTEL" x-model="customer.provider" required class="peer sr-only">
                <div class="border-2 border-gray-200 rounded-xl p-4 text-center peer-checked:border-red-500 peer-checked:bg-red-50 transition">
                  <div class="w-12 h-12 bg-red-500 rounded-full mx-auto mb-2 flex items-center justify-center">
                    <span class="text-white font-bold text-xs">AIRTEL</span>
                  </div>
                  <span class="text-sm font-medium">Airtel Money</span>
                </div>
              </label>
            </div>
          </div>

          <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
            <div class="flex items-start gap-3">
              <svg class="w-5 h-5 text-blue-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div class="text-sm text-blue-800">
                <p class="font-semibold mb-1">Paiement s√©curis√© via OpenPay</p>
                <p>Vous recevrez une notification sur votre t√©l√©phone pour confirmer le paiement.</p>
              </div>
            </div>
          </div>

          <button type="submit"
                  :disabled="processing"
                  class="w-full bg-primary text-white py-4 rounded-xl font-bold hover:bg-orange-600 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
            <span x-show="!processing">Payer <span x-text="cartTotal() + ' FCFA'"></span></span>
            <span x-show="processing" class="flex items-center gap-2">
              <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
              Traitement en cours...
            </span>
          </button>
        </form>

        <button @click="checkoutOpen = false" class="w-full text-gray-500 py-2 hover:text-gray-700 transition">
          Annuler
        </button>
      </div>
    </div>
  </div>

  <!-- Payment Success Modal -->
  <div x-show="successOpen" x-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div @click="successOpen = false" x-show="successOpen" x-transition.opacity class="absolute inset-0 bg-black/50"></div>
    <div x-show="successOpen"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         class="relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 text-center">

      <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>

      <h2 class="text-2xl font-bold text-gray-800 mb-2">Paiement Initi√© !</h2>
      <p class="text-gray-600 mb-4">
        Veuillez v√©rifier votre t√©l√©phone pour confirmer le paiement.
      </p>

      <div class="bg-gray-50 rounded-xl p-4 mb-4">
        <p class="text-sm text-gray-500">R√©f√©rence de commande</p>
        <p class="font-mono font-bold text-gray-800" x-text="orderReference"></p>
      </div>

      <div x-show="paymentUrl" class="mb-4">
        <a :href="paymentUrl" target="_blank"
           class="inline-flex items-center gap-2 text-primary font-medium hover:underline">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
          Ouvrir le lien de paiement
        </a>
      </div>

      <button @click="successOpen = false; cart = []; checkoutOpen = false;"
              class="w-full bg-secondary text-white py-3 rounded-xl font-medium hover:bg-gray-800 transition">
        Fermer
      </button>
    </div>
  </div>

  <!-- Payment Error Modal -->
  <div x-show="errorOpen" x-cloak class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div @click="errorOpen = false" x-show="errorOpen" x-transition.opacity class="absolute inset-0 bg-black/50"></div>
    <div x-show="errorOpen"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-95"
         x-transition:enter-end="opacity-100 scale-100"
         class="relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 text-center">

      <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-10 h-10 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </div>

      <h2 class="text-2xl font-bold text-gray-800 mb-2">Erreur de Paiement</h2>
      <p class="text-gray-600 mb-4" x-text="errorMessage"></p>

      <button @click="errorOpen = false"
              class="w-full bg-primary text-white py-3 rounded-xl font-medium hover:bg-orange-600 transition">
        R√©essayer
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="gradient-bg mt-12 py-8">
    <div class="container mx-auto px-4 text-center">
      <div class="flex items-center justify-center space-x-2 mb-4">
        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
          </svg>
        </div>
        <span class="text-xl font-bold text-white">Booker</span>
      </div>
      <p class="text-gray-400 text-sm">
        ¬© 2026 Booker. Tous droits r√©serv√©s.
      </p>
      <p class="text-gray-500 text-xs mt-2">
        Paiement s√©curis√© par OpenPay - MTN Mobile Money & Airtel Money
      </p>
    </div>
  </footer>

  <script>
    function shop() {
      return {
        products: [],
        cart: [],
        cartOpen: false,
        checkoutOpen: false,
        successOpen: false,
        errorOpen: false,
        loading: true,
        processing: false,
        selectedCategory: 'all',
        categories: [],
        customer: {
          name: '',
          phone: '',
          provider: 'MTN'
        },
        orderReference: '',
        paymentUrl: '',
        errorMessage: '',

        async init() {
          await this.loadProducts();
          this.loadCart();
        },

        async loadProducts() {
          try {
            const response = await fetch('products.json');
            this.products = await response.json();
            this.categories = [...new Set(this.products.map(p => p.category))];
          } catch (error) {
            console.error('Error loading products:', error);
            this.errorMessage = 'Impossible de charger les produits';
            this.errorOpen = true;
          } finally {
            this.loading = false;
          }
        },

        get filteredProducts() {
          if (this.selectedCategory === 'all') return this.products;
          return this.products.filter(p => p.category === this.selectedCategory);
        },

        addToCart(product) {
          const existing = this.cart.find(item => item.id === product.id);
          if (existing) {
            existing.quantity++;
          } else {
            this.cart.push({ ...product, quantity: 1 });
          }
          this.saveCart();
          this.showNotification('Produit ajout√© au panier');
        },

        removeFromCart(product) {
          this.cart = this.cart.filter(item => item.id !== product.id);
          this.saveCart();
        },

        increaseQty(product) {
          const item = this.cart.find(i => i.id === product.id);
          if (item) item.quantity++;
          this.saveCart();
        },

        decreaseQty(product) {
          const item = this.cart.find(i => i.id === product.id);
          if (item) {
            item.quantity--;
            if (item.quantity <= 0) this.removeFromCart(product);
          }
          this.saveCart();
        },

        cartTotal() {
          return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        },

        saveCart() {
          localStorage.setItem('booker_cart', JSON.stringify(this.cart));
        },

        loadCart() {
          const saved = localStorage.getItem('booker_cart');
          if (saved) this.cart = JSON.parse(saved);
        },

        showNotification(message) {
          // Simple notification - could be enhanced with a toast library
          console.log(message);
        },

        async processPayment() {
          if (!this.customer.name || !this.customer.phone || !this.customer.provider) {
            this.errorMessage = 'Veuillez remplir tous les champs';
            this.errorOpen = true;
            return;
          }

          this.processing = true;

          try {
            const orderRef = 'ORDER_' + Date.now();
            const total = this.cartTotal();

            // Create payment link via OpenPay API
            const paymentData = {
              amount: total,
              description: `Commande ${orderRef} - ${this.cart.map(i => i.name).join(', ')}`,
              expires_at: 24,
              customer: {
                name: this.customer.name,
                phone: this.customer.phone
              },
              success_url: window.location.href,
              metadata: {
                order_id: orderRef,
                items: JSON.stringify(this.cart)
              }
            };

            // Note: In production, this should call YOUR backend server which then calls OpenPay
            // to avoid exposing your API key in client-side code
            const response = await fetch('https://api.openpay-cg.com/v1/transaction/payment-link', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'XO-API-KEY': 'sk_5ad92ca60d3443458670be53a695a62f4c71c27fb5c6807890e07d48be255335' // ‚ö†Ô∏è Replace with your actual API key (use backend in production!)
              },
              body: JSON.stringify(paymentData)
            });

            if (!response.ok) {
              const error = await response.json();
              throw new Error(error.message || 'Erreur lors du paiement');
            }

            const result = await response.json();

            this.orderReference = orderRef;
            this.paymentUrl = result.data?.payment_url || '';

            if (result.success && result.data?.payment_url) {
              this.successOpen = true;
              // Optionally redirect to payment URL
              // window.open(result.data.payment_url, '_blank');
            } else {
              throw new Error('R√©ponse invalide du serveur de paiement');
            }

          } catch (error) {
            console.error('Payment error:', error);
            this.errorMessage = error.message || 'Une erreur est survenue lors du paiement';
            this.errorOpen = true;
          } finally {
            this.processing = false;
          }
        }
      }
    }
  </script>
</body>
</html>
